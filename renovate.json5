{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: ["config:recommended"],
  baseBranchPatterns: ["main"],
  enabledManagers: ["github-actions"],
  branchPrefix: "Garoon-renovate/",
  labels: ["renovate"],
  timezone: "Asia/Tokyo",
  minimumReleaseAge: "0 days", // to test
  dependencyDashboard: true,
  automergeSchedule: ["at any time"], // testing
  prConcurrentLimit: 0, // Update later
  prHourlyLimit: 4,
  semanticCommits: "disabled",
  automergeStrategy: "merge-commit",
  platformAutomerge: false,
  lockFileMaintenance: {
    enabled: true,
    automerge: false,
    schedule: ["every 3 months on the first day of the month"],
    branchTopic: "lock-file-maintenance-{{packageFile}}",
    commitMessageExtra: "({{packageFile}})",
  },
  "packageRules": [
    /* ------------------------------------------
      GitHub Actions
    ------------------------------------------  */

    // Auto-merge minor/patch updates for trusted actions
    {
      matchManagers: ["github-actions"],
      matchDepTypes: ["action"],
      matchUpdateTypes: ["minor", "patch"],
      branchPrefix: "Garoon-renovate-automerge/",
      automerge: true,
      matchPackagePatterns: [
        "^actions/",
        "^cybozu",
        "^aws-actions/",
        "^docker/",
        "^ruby/"
        ],
    },

    // Third-party actions: manual review, pin digest
    {
      matchManagers: ["github-actions"],
      matchDepTypes: ["action"],
      excludePackagePatterns: ["^actions/", "^cybozu", "^aws-actions/", "^docker/", "^ruby/"],
      automerge: false,
      pinDigests: true
    },

    // Disable Renovate GitHub Actions Docker image
    {
      matchManagers: ["github-actions"],
      matchDepTypes: ["service", "container"],
      matchPackageNames: [
        "mysql",
        "/\\.dkr\\.ecr\\..*\\.amazonaws\\.com//",
        "/container-registry\\.oracle\\.com/",
      ],
      enabled: false,
    }
  ],
  customManagers: [],
}
